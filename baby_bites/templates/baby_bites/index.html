{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">

  <!-- Mail App Form -->
  <div class="mail-app mb-5">
    <h1>Django Mail App</h1>
    <form method="post">
      {% csrf_token %}
      <div class="mb-3">
        <label for="address" class="form-label">To:</label>
        <input id="address" type="email" name="address" class="form-control">
      </div>
      <div class="mb-3">
        <label for="subject" class="form-label">Subject:</label>
        <input id="subject" name="subject" class="form-control">
      </div>
      <div class="mb-3">
        <label for="message" class="form-label">Message:</label>
        <textarea id="message" name="message" class="form-control"></textarea>
      </div>
      <input type="submit" class="btn btn-primary">
    </form>
    {% if result %}
      <p class="mt-2">{{ result }}</p>
    {% endif %}
  </div>

  <!-- Blog Posts Section -->
  <h1>Latest Blog Posts</h1>
  <div class="row image-container">
    {% for post in post_list %}
    <div class="col-md-4 mb-4">
      <div class="card">
        <!-- Featured Image -->
        {% if "placeholder" in post.featured_image.url %}
        <img
          class="card-img-top"
          src="{% static 'images/default.jpg' %}"
          alt="placeholder image"
        />
        {% else %}
        <img
          class="card-img-top"
          src="{{ post.featured_image.url }}"
          alt="{{ post.title }}"
        />
        {% endif %}
        <div class="image-flash"></div>

        <div class="card-body">
          <h5 class="card-title">{{ post.title }}</h5>
          <p class="card-text">{{ post.excerpt }}</p>
          <a href="{% url 'post_detail' post.slug %}" class="btn btn-primary">Read more</a>
        </div>
      </div>
    </div>
    {% empty %}
    <p>No blog posts yet.</p>
    {% endfor %}
  </div>
</div>
{% endblock content %}
